This code is originally from preshing.com/20120515/memory-reordering-caught-in-the-act/

Visit the great post for more details about memory ordering!

